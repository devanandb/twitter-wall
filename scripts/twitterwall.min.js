(function(){var d,a;var c=function(f,e){return function(){return f.apply(e,arguments)}},b=Object.prototype.hasOwnProperty;a=(typeof exports!=="undefined"&&exports!==null)?exports:this;d=function(f,e){this.container=document.getElementById(f);this.itemDelay=(typeof e==="undefined"||e==undefined?undefined:e.itemDelay)||5000;this.emptyDelay=(typeof e==="undefined"||e==undefined?undefined:e.emptyDelay)||60000;this.twitterqueue=new a.DelayedQueue().onitem(this.itemDelay,(c(function(g){return this.displayTweet(g)},this))).onempty(this.emptyDelay,(c(function(){return this.run()},this)));return this};d.prototype.timeline=function(f,e){this.timelineName=f;this.timelineOptions=e;return this};d.prototype.list=function(f,e){this.listName=f;this.listOptions=e;return this};d.prototype.search=function(f,e){this.searchTerms=f;this.searchOptions=e;return this};d.prototype.run=function(){var e;e=(c(function(g,f){return this.enqueueTweets(g,f)},this));if(this.timelineName){twitterlib.timeline(this.timelineName,this.timelineOptions,e)}if(this.listName){twitterlib.list(this.listName,this.listOptions,e)}if(this.searchTerms){twitterlib.search(this.searchTerms,this.searchOptions,e)}return this};d.prototype.enqueueTweets=function(f,e){return f.length>0?this.twitterqueue.push(f):null};d.prototype.displayTweet=function(e){return this.container.insertBefore(this.createTweet(e),this.container.firstChild)};d.prototype.createTweet=function(j){var f,n,h,g,l,m,k,i,e;e=j.id;l=twitterlib.ify.clean(j.text);f=j.created_at;n=twitterlib.time.datetime(f);h=twitterlib.time.iso8601(f);g=twitterlib.time.relative(f);m=j.user.screen_name;i=j.user.name||m;k=j.user.profile_image_url;return this.createElement({tagName:"li",childNodes:[{tagName:"div",className:"status",childNodes:[{tagName:"div",className:"author",childNodes:[{tagName:"a",className:"url",href:("http://twitter.com/"+(m)),title:(""+(i)),cssText:('background-image: url("'+(k)+'");')}]},{tagName:"div",className:"data",childNodes:[{tagName:"div",className:"meta",childNodes:[{tagName:"a",className:"name",href:("http://twitter.com/"+(m)),title:(""+(i)),textContent:(""+(m))},{tagName:"a",className:"time",rel:"bookmark",href:("http://twitter.com/"+(m)+"/status/"+(e)),title:(""+(n)),childNodes:[{tagName:"time",className:"published",datetime:(""+(h)),textContent:(""+(g))}]}]},{tagName:"div",className:"content",innerHTML:(""+(l))}]}]}]})};d.prototype.createElement=function(m){var k,j,h,g,f,i,e,l;e=document.createElement(m.tagName);delete m.tagName;k=m;for(f in k){if(!b.call(k,f)){continue}l=k[f];if(f==="childNodes"){h=l;for(j=0,g=h.length;j<g;j++){i=h[j];e.appendChild(this.createElement(i))}}else{if(f==="cssText"){e.style.cssText=l}else{e[f]=l}}}return e};a.TwitterWall=d})();